<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>RPG Developer NEXT 取扱説明書</title>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<script src="js/jquery.min.js"></script>
<script src="js/script.js"></script>
<script src="js/auto-document.js"></script>
<script src="js/version-getter.js"></script>
</head>

<body class="node_editor">
<!-- タイトルバー -->
<div id="header">
  <a href="index.html"><h1><span>RPG Developer NEXT</span> <script>PrintVersion();</script> 取扱説明書</h1></a>
</div>

<div id="container">
<!-- 目次サイドバー -->
<div id="menuContainer">
  <div id="menuContent">
    <script src="js/manual-tree.js"></script>
    <script src="js/auto-tree.js"></script>
  </div>
</div>

<!-- メインコンテンツ -->
<div id="mainContainer">
  <!-- ぱんくずリスト [&gt]=[>] -->
  <div id="breadcrumb"><a href="index.html">HOME</a> &gt; エディター部</div>

  <!-- 親ノード見出し -->
  <h2>エディター部</h2>
  <div class="text">
    <!-- 親ノードのテキスト -->
    <p>
      ゲームのエディタープログラムです。<br>
      エディター部は C# (Microsoft .NET Framework 環境下) で開発されているため、ある程度のスペックがない環境では動作が多少もたつく可能性があります。<br>
      ここでは編集面に関わる主要な機能について概説しています。<br>
    </p>
  </div>
  <hr>

  <!-- 子ノード見出し -->
  <h3 id="1"><a href="editor-menu.html">上部メニュー</a></h3>
  <div class="text">
    <!-- 子ノードのテキスト -->
  </div>
  <hr>

  <!-- 子ノード見出し -->
  <h3 id="2"><a href="editor-schedule.html">スケジュール</a></h3>
  <div class="text">
    <!-- 子ノードのテキスト -->
  </div>
  <hr>

  <!-- 子ノード見出し -->
  <h3 id="3"><a href="editor-text.html">テキスト エディター</a></h3>
  <div class="text">
    <!-- 子ノードのテキスト -->
  </div>
  <hr>

  <!-- 子ノード見出し -->
  <h3 id="4"><a href="editor-database.html">データベース エディター</a></h3>
  <div class="text">
    <!-- 子ノードのテキスト -->
  </div>
  <hr>

  <!-- 子ノード見出し -->
  <h3 id="5"><a href="editor-map.html">マップ エディター</a></h3>
  <div class="text">
    <!-- 子ノードのテキスト -->
  </div>
  <hr>

  <!-- 子ノード見出し -->
  <h3 id="6">細かい動作仕様</h3>
  <div class="text">
    <!-- 子ノードのテキスト -->
    <h4>エディター全般</h4>
    <ul class="disc">
      <li>リストを並び替える機能は、いわゆる「不安定なソート」であるため、連続して同じ並び替えを行うと内容が同一であっても順番が変更される可能性があります。</li>
      <li>ゲーム素材ファイルの単純な取り込みや管理機能は搭載していません。Windows標準のエクスプローラーを使った方が操作性が良く、プレビューにも適しているためです。</li>
      <li>「RPGツクール素材の変換：歩行グラフィック」では、補間方法が最近傍補間に限定されます。これは、透過を正しく行うための仕様です。</li>
    </ul>

    <h4>テキスト エディター</h4>
    <ul class="disc">
      <li>
        コマンド挿入ダイアログではコード入力補完に対応していません。<br>
        入力補完の機能がキーボード主体であるのに対し、ダイアログはマウス主体であり、操作性が良くないためです。<br>
      </li>
      <li>
        ファイルをまたいで一括置換を行うとき、同一行に複数の対象語があると最初の単語しか置換されません。<br>
        これは、見つかった行と列と文字列の長さで正確に対象ワードを捉えられるときだけ置換するためです。<br>
      </li>
      <li>
        コード メトリックス
        <ul class="circle">
          <li>関数リストに従って処理するため、リストが行番号の昇順に並び替えられます。</li>
          <li>行コメントの部分は無視されますが、範囲コメントはコメントとして認識されず、コード扱いとなります。</li>
          <li>functionキーワードの直後に始まり括弧 ( が付いている行は無名関数としてみなされます。</li>
          <li>
            関数の内部に無名関数を含むものは正しく計算されません。<br>
            計算範囲が関数の先頭から、次の関数の先頭の一つ前の行orファイル末尾までとしているためです。<br>
          </li>
          <li>同じ行に複数の制御文を記述している場合は正しく計算されません。</li>
          <li>case/defaultラベルも計算に含まれます。</li>
          <li>for文の初期化式、継続条件式、再初期化式を改行しながら記述した場合はステートメント数が正しく計算されません。</li>
          <li>
            三項演算子の個数は "?" の個数で判断されます。<br>
            文字列中であってもに "?" と ":" が同じ行にあれば三項演算子としてみなされてしまいます。<br>
            三項演算子を改行しながら記述した場合はサイクロマティック複雑度が正しく計算されません。<br>
          </li>
        </ul>
      </li>

      <li>
        コマンドツリー
        <ul class="circle">
          <li>スクリプト「$Constants.nut」および「$Function.nut」はコマンドツリーの取り込み対象となります。</li>
          <li>
            スクリプト定数の定義要領
            <ul class="circle">
              <li>列挙体 … 定義の直前行に置かれた行コメントが表示名になります。</li>
              <li>列挙体メンバー … 行末のコメントが表示名になります。</li>
              <li>定数 … 行末のコメントが表示名になります。</li>
            </ul>
          </li>
          <li>
            スクリプト関数の定義要領
            <ul class="circle">
              <li>関数定義の直前の行に、コマンドツリー「ツール：スクリプト関数タグの挿入」で作られる注釈用のタグを順不同で書き並べます。</li>
              <li>「中間ノード」は \ で区切ることでツリーの階層を深めることができます。</li>
              <li>「引数」は書いた順番でそのまま第１引数、第２引数...とみなされます。</li>
              <li>注釈用のタグの付いていない関数はコード中の識別子がそのまま「スクリプト関数」直下のノードとして登録されます。</li>
            </ul>
          </li>
          <li>スクリプトの定数・関数はツリーの右クリックメニューからいつでも更新できます。</li>
          <li>スクリプトの定数・関数はイベント編集画面を立ち上げたときに自動で更新されます。</li>
        </ul>
      </li>

      <li>
        コード入力補完
        <ul class="circle">
          <li>サジェスト候補に「組み込みオブジェクト」と「スクリプト標準命令」は含まれますが、スクリプト定義の関数、定数、変数はいずれも含まれません。</li>
          <li>現在選択されている単語を基にして検索し、その単語がインスタンス（プロパティ）や列挙体である場合はその型に従った絞り込み検索となります。</li>
        </ul>
      </li>

      <li>
        コード逆探索
        <ul class="circle">
          <li>コマンドツリーと連動しています。</li>
          <li>現在選択されている単語を基にしてコード入力補完のソースから検索します</li>
          <li>名称が重複しているキーワードは、見つかった候補の中からユーザーが一つ選択して特定します。</li>
          <li>数値（10進数/16進数）が対象の場合は何らかのIDとみなしてデータベースからFixedIDを検索します。</li>
          <li>関数として見つかった場合はダイアログによる編集が可能です。</li>
        </ul>
      </li>
    </ul>

    <h4>データベース エディター</h4>
    <ul class="disc">
      <li>システムDBに限り、XMLで読み書きしています。それ以外のDBはすべてタブ区切りのTSVで読み書きします。</li>
      <li>FixedIDは一意のID (0~2,147,483,647) で、この値をユーザーによって変更することはできません。</li>
      <li>
        FixedIDはランダムに生成されるため、稀に重複してしまう可能性があります。<br>
        万が一重複が確認された場合はデータの削除および作り直しが必要となります。<br>
      </li>
      <li>他のDBに依存するような列（リスト列、IDリスト列、IDと値のリスト列）は、依存先の項目が削除・変更されたときにその内容が反映されます。</li>
      <li>インポート機能において、エフェクトの共通スクリプトは操作対象になりません。</li>
      <li>タイルセットDBのオートタイルは127個まで登録できます。</li>
      <li>
        GUIタイプのDB（ユニット、エフェクト、タイルセット、ユーザー）は、項目リストのTSVファイルが変更された時点で強制的に更新されます。
        <ul class="circle">
          <li>個別の項目で編集を続行しても意味のない変更になってしまう可能性があることから、そもそも編集を続行できないようにするためです。</li>
        </ul>
      </li>
    </ul>

    <h4>マップ エディター</h4>
    <ul class="disc">
      <li>フォルダーのコピー・貼り付けはできません。</li>
      <li>イベント編集画面のスクリプト編集時、別のタブに移動するとその時点で編集内容が仮確定されるため、キャンセルして閉じるときに変更を破棄するかどうかの確認は行われません。</li>
      <li>エディター上のイベントの外見は ページ1 のものになります。</li>
      <li>マップのピクセルサイズが 65535x65535 を超える領域は編集できません。</li>
      <li>カーソルを高速に移動させてタイルを配置しようとすると、間引きされる形で配置されます。</li>
      <li>
        クリッピング機能
        <ul class="circle">
          <li>既に配置されているタイルを右クリックで範囲選択するか、パレット上で範囲選択することで、その領域をあたかも一つのパレットタイルのように使えるようにする機能です。</li>
          <li>既に配置されているタイルをクリッピングしている間はパレット上で選択されていない状態となります。</li>
          <li>クリッピング領域が 1x1 のときは単純なスポイトとなり、該当タイルがパレット上でも選択されます。</li>
        </ul>
      </li>
      <li>
        オートタイル解除機能
        <ul class="circle">
          <li>パレット上のタイルを選択した状態（クリッピング領域が 1x1）のときは、八方接続型で配置されます。</li>
          <li>クリッピング中は、クリッピングしたときのタイルの接続状態をそのままコピーします。</li>
        </ul>
      </li>
      <li>
        カーボン機能
        <ul class="circle">
          <li>子マップで (0, 0)=空白タイル の部分が親マップのタイルで補完される機能です。</li>
          <li>マップのサイズが親と子で異なっていても問題なく動作します。</li>
          <li>影は、同一座標に対して親か子のどちらか片方で付けられている場合のみ有効です。</li>
          <li>あくまでもタイルを補完する機能であるため、イベントはコピーされません。</li>
        </ul>
      </li>
      <li>
        ランダム生成機能
        <ul class="circle">
          <li>矩形の小部屋と幅1の通路から構成されます。</li>
          <li>ランダム要素: 小部屋サイズ、小部屋分割方向、小部屋分割サイズ、通路起点、通路数、通路を出す方向</li>
          <li>広すぎるマップでは、大きな小部屋に一つしかない通路や、大きな小部屋が多くなってしまう等の問題があるためあまり適しません。</li>
          <li>正方形に近いマップでは、縦長or横長の小部屋が必ず一つ作られてしまうためあまり適しません。</li>
        </ul>
      </li>
      <!--
        <li>
          「Easyエディター」
          <ul class="circle">
            <li>原則としてコマンドツリーに登録されている単語に基づいて逐語訳します。</li>
            <li>生コードに対してシステムが変更を加えることはなく、あくまでもユーザーによって編集されます。</li>
            <li>複数行にまたがる範囲コメントは、先頭行のコメント部分のみ認識され、それ以降は通常のコード行としてみなされます。</li>
            <li>インデントが不正（括弧が対応しない状態）な箇所は赤字で表示されます。</li>
            <li>挿入にあたっては、生コードを編集するダイアログを経由します。</li>
            <li>Shiftキーを押しながら行をダブルクリックすると、その行に挿入します。</li>
            <li>切り取り・コピー・貼り付けはクリップボードを使っていないため、同一プロセス内でのみ有効です。</li>
          </ul>
        </li>
      -->
    </ul>
  </div>
  <hr>

</div><!-- /#mainContainer -->
</div><!-- /#container -->
</body>
</html>
